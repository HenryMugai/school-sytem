{% extends "teacher/teacher_base.html" %}

{% block content %}
<div class="subjects-content">
  <h2>Assign Subject and Class</h2>

  <form method="POST" class="assign-form">
    <div class="form-row">
      <label>Subject:</label>
      <select name="subject_id" required>
        <option value="">Select Subject</option>
        {% for sub in subjects %}
          <option value="{{ sub.id }}">{{ sub.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="form-row">
      <label>Class:</label>
      <select name="class_id" required>
        <option value="">Select Class</option>
        {% for cls in classes %}
          <option value="{{ cls.id }}">{{ cls.name }} {{ cls.stream }}</option>
        {% endfor %}
      </select>
    </div>

    <button type="submit">Add</button>
  </form>

  <hr>

  <h3>Assigned Subjects and Classes</h3>
  {% if assignments %}
  <table class="assignment-table">
    <thead>
      <tr>
        <th>Subject</th>
        <th>Class</th>
        <th>Stream</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for a in assignments %}
      <tr>
        <td>{{ a.subject }}</td>
        <td>{{ a.class_name }}</td>
        <td>{{ a.stream }}</td>
        <td>
          <a href="{{ url_for('teacher_subjects', delete=a.id) }}"
             class="delete-btn"
             onclick="return confirm('Are you sure you want to remove this assignment?');">
            Remove
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>No assignments yet.</p>
  {% endif %}
</div>
{% endblock %}
