<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Class Management</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<div class="teacher-class-management">
  <h2>Class Management</h2>

  {% if error %}
    <p class="error">{{ error }}</p>
  {% endif %}

  <!-- Class Info -->
  <div class="class-info-container">
    <h3>Class: {{ class_info.name }} - {{ class_info.stream }}</h3>
    <p><strong>Total Students:</strong> {{ students|length }}</p>
  </div>

  <!-- Form and List -->
  <div class="top-container">
    <!-- Add Student Form -->
    <div class="form-container">
      <h3>Add Student</h3>
      <form method="POST">
        <input type="text" name="name" placeholder="Full Name" required>
        <input type="text" name="admission_no" placeholder="Admission No" required>
        <input type="text" name="next_of_kin" placeholder="Next of Kin">
        <input type="text" name="next_of_kin_contact" placeholder="Kin Contact">
        <button type="submit">Add Student</button>
      </form>
    </div>
  </div>

  <!-- Student List -->
  <div class="list-container" style="margin-top: 30px;">
    <h3>Students in Class</h3>
    {% if students %}
      <ul>
        {% for s in students %}
          <li>
            <strong>{{ s.name }}</strong> ({{ s.admission_no }})<br>
            <small>Kin: {{ s.next_of_kin }} | Contact: {{ s.next_of_kin_contact }}</small>
            <form method="POST" action="{{ url_for('remove_student', student_id=s.id) }}" style="margin-top: 5px;">
              <button type="submit" class="delete-btn">Remove</button>
            </form>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="no-students">No students in this class yet.</p>
    {% endif %}
  </div>
</div>
